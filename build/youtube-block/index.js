(()=>{"use strict";var e,l={14:(e,l,o)=>{const a=window.wp.blocks,n=window.wp.i18n,t=window.wp.blockEditor,c=window.wp.apiFetch;var r=o.n(c);const u=window.wp.data,s=window.wp.components,i=window.wp.element,b=window.ReactJSXRuntime,d=JSON.parse('{"UU":"youtube-channel-block/youtube-channel-block"}');(0,a.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:l,clientId:o}){const{channelUrl:c,playlistUrl:d,apiKey:h,maxResults:y,order:p,isLoading:_,error:k,lastUpdated:v,autoUpdate:m,updateFrequency:g,layout:x,columns:j,carouselVisible:w,carouselAutoplay:C,carouselInterval:U,align:f}=e,[S,T]=(0,i.useState)(c||d),[B,L]=(0,i.useState)(h),P=e=>e?e.includes("playlist?list=")||e.includes("/playlist/")?{channelUrl:"",playlistUrl:e}:(e.includes("youtube.com/@")||e.includes("youtube.com/c/")||e.includes("youtube.com/channel/")||e.includes("youtube.com/user/"),{channelUrl:e,playlistUrl:""}):{channelUrl:"",playlistUrl:""},N=e=>{T(e),e&&B&&setTimeout(()=>{(async e=>{if(!B||!e)return;const{channelUrl:n,playlistUrl:t}=P(e);l({isLoading:!0,error:""});try{const e=(await r()({path:"/youtube-channel-block/v1/fetch-videos",method:"POST",data:{channel_url:n,playlist_url:t,api_key:B,max_results:y,order:p}})).videos.map(e=>(0,a.createBlock)("core/embed",{url:e.video_url,providerNameSlug:"youtube",responsive:!0}));R(o,e),l({isLoading:!1,error:"",lastUpdated:(new Date).toISOString(),channelUrl:n,playlistUrl:t,apiKey:B}),V("")}catch(e){console.error("YouTube Block Error:",e),l({isLoading:!1,error:`Error: ${e.message}. Please check your API key and URLs, and ensure the plugin is properly activated.`})}})(e)},100)},{replaceInnerBlocks:R}=(0,u.useDispatch)("core/block-editor"),[I,A]=(0,i.useState)(S),[O,V]=(0,i.useState)("");(0,i.useEffect)(()=>{if(I!==S&&S){R(o,[]);const{channelUrl:e,playlistUrl:a}=P(S);l({error:"",lastUpdated:"",channelUrl:e,playlistUrl:a}),V((0,n.__)('Source changed - videos cleared. Click "Refresh Videos" to fetch new content.',"youtube-channel-block")),setTimeout(()=>V(""),5e3)}A(S)},[S,o,R,l,I]);const Y=(0,t.useBlockProps)({className:["wp-block-youtube-channel-block",f?`align${f}`:"","grid"===x?"is-layout-grid":"","carousel"===x?"is-layout-carousel":""].filter(Boolean).join(" "),"data-carousel-visible":"carousel"===x?String(w):void 0,"data-carousel-autoplay":"carousel"===x?String(C):void 0,"data-carousel-interval":"carousel"===x?String(U):void 0}),D="carousel"===x?(0,t.useInnerBlocksProps)({className:"youtube-channel-block-inner-blocks splide__list"},{templateLock:!1,allowedBlocks:["core/embed","core/paragraph","core/heading"]}):(0,t.useInnerBlocksProps)({className:["youtube-channel-block-inner-blocks","grid"===x?`has-columns-${j}`:""].filter(Boolean).join(" ")},{templateLock:!1,allowedBlocks:["core/embed","core/paragraph","core/heading"]}),E=[{label:(0,n.__)("Date (newest first)","youtube-channel-block"),value:"date"},{label:(0,n.__)("Date (oldest first)","youtube-channel-block"),value:"dateAsc"},{label:(0,n.__)("Title (A-Z)","youtube-channel-block"),value:"title"},{label:(0,n.__)("Title (Z-A)","youtube-channel-block"),value:"titleDesc"},{label:(0,n.__)("Video count","youtube-channel-block"),value:"videoCount"},{label:(0,n.__)("View count","youtube-channel-block"),value:"viewCount"}],F=[{label:(0,n.__)("List (vertical)","youtube-channel-block"),value:"list"},{label:(0,n.__)("Grid","youtube-channel-block"),value:"grid"},{label:(0,n.__)("Carousel","youtube-channel-block"),value:"carousel"}],$=[{label:(0,n.__)("Hourly","youtube-channel-block"),value:"hourly"},{label:(0,n.__)("Daily","youtube-channel-block"),value:"daily"},{label:(0,n.__)("Weekly","youtube-channel-block"),value:"weekly"}],q=async()=>{if(!B)return void l({error:(0,n.__)("YouTube API key is required.","youtube-channel-block")});if(!S)return void l({error:(0,n.__)("Please provide a YouTube channel or playlist URL.","youtube-channel-block")});const{channelUrl:e,playlistUrl:t}=P(S);l({isLoading:!0,error:""});try{const n=(await r()({path:"/youtube-channel-block/v1/fetch-videos",method:"POST",data:{channel_url:e,playlist_url:t,api_key:B,max_results:y,order:p}})).videos.map(e=>(0,a.createBlock)("core/embed",{url:e.video_url,providerNameSlug:"youtube",responsive:!0}));R(o,n),l({isLoading:!1,error:"",lastUpdated:(new Date).toISOString(),channelUrl:e,playlistUrl:t,apiKey:B}),V("")}catch(e){console.error("YouTube Block Error:",e),l({isLoading:!1,error:`Error: ${e.message}. Please check your API key and URLs, and ensure the plugin is properly activated.`})}};return S?(0,b.jsxs)("div",{...Y,children:[(0,b.jsxs)(t.InspectorControls,{children:[(0,b.jsxs)(s.PanelBody,{title:(0,n.__)("YouTube Settings","youtube-channel-block"),children:[(0,b.jsx)(s.TextControl,{label:(0,n.__)("YouTube API Key","youtube-channel-block"),value:B,onChange:L,help:(0,n.__)("Get your API key from Google Cloud Console","youtube-channel-block")}),(0,b.jsx)(s.TextControl,{label:(0,n.__)("Source URL","youtube-channel-block"),value:S,onChange:N,placeholder:"https://www.youtube.com/@channelname or https://www.youtube.com/playlist?list=...",help:(0,n.__)("Enter a YouTube channel URL or playlist URL","youtube-channel-block")}),(0,b.jsx)(s.RangeControl,{label:(0,n.__)("Number of videos","youtube-channel-block"),value:y,onChange:e=>l({maxResults:e}),min:1,max:50}),(0,b.jsx)(s.SelectControl,{label:(0,n.__)("Sort order","youtube-channel-block"),value:p,options:E,onChange:e=>l({order:e})})]}),(0,b.jsxs)(s.PanelBody,{title:(0,n.__)("Layout","youtube-channel-block"),initialOpen:!1,children:[(0,b.jsx)(s.SelectControl,{label:(0,n.__)("Layout Type","youtube-channel-block"),value:x,options:F,onChange:e=>l({layout:e})}),"grid"===x&&(0,b.jsx)(s.RangeControl,{label:(0,n.__)("Columns","youtube-channel-block"),value:j,onChange:e=>l({columns:e}),min:1,max:6}),"carousel"===x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.RangeControl,{label:(0,n.__)("Visible videos","youtube-channel-block"),value:w,onChange:e=>l({carouselVisible:e}),min:1,max:6}),(0,b.jsx)(s.ToggleControl,{label:(0,n.__)("Autoplay","youtube-channel-block"),checked:C,onChange:e=>l({carouselAutoplay:e})}),(0,b.jsx)(s.RangeControl,{label:(0,n.__)("Interval (seconds)","youtube-channel-block"),value:U,onChange:e=>l({carouselInterval:e}),min:1,max:12})]})]}),(0,b.jsxs)(s.PanelBody,{title:(0,n.__)("Auto Update","youtube-channel-block"),initialOpen:!1,children:[(0,b.jsx)(s.ToggleControl,{label:(0,n.__)("Auto-update videos","youtube-channel-block"),checked:m,onChange:e=>l({autoUpdate:e})}),m&&(0,b.jsx)(s.SelectControl,{label:(0,n.__)("Update frequency","youtube-channel-block"),value:g,options:$,onChange:e=>l({updateFrequency:e})})]})]}),(0,b.jsxs)("div",{className:"youtube-channel-block-container",children:[(0,b.jsxs)("div",{className:"youtube-channel-block-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:(0,n.__)("YouTube Videos","youtube-channel-block")}),(0,b.jsxs)("div",{className:"youtube-channel-block-meta",children:[v&&(0,b.jsxs)("span",{className:"last-updated",children:[(0,n.__)("Last updated:","youtube-channel-block")," ",new Date(v).toLocaleString()]}),m&&(0,b.jsxs)("span",{className:"auto-update-badge",children:[(0,n.__)("Auto-update:","youtube-channel-block")," ",g]})]})]}),(0,b.jsxs)("div",{className:"youtube-channel-block-actions",children:[(0,b.jsx)(s.Button,{variant:"primary",onClick:q,disabled:_||!B,children:_?(0,n.__)("Fetching...","youtube-channel-block"):(0,n.__)("Refresh Videos","youtube-channel-block")}),(0,b.jsx)(s.Button,{variant:"secondary",onClick:()=>{R(o,[]),l({error:"",lastUpdated:""}),V("")},children:(0,n.__)("Clear Videos","youtube-channel-block")})]})]}),k&&(0,b.jsx)(s.Notice,{status:"error",isDismissible:!1,children:k}),O&&(0,b.jsx)(s.Notice,{status:"info",isDismissible:!1,children:O}),_&&(0,b.jsxs)("div",{className:"youtube-channel-block-loading",children:[(0,b.jsx)(s.Spinner,{}),(0,b.jsx)("span",{children:(0,n.__)("Fetching videos...","youtube-channel-block")})]}),(0,b.jsx)("div",{...D})]})]}):(0,b.jsx)("div",{...Y,children:(0,b.jsx)(s.Placeholder,{icon:"video-alt3",label:(0,n.__)("YouTube Videos Block","youtube-channel-block"),instructions:(0,n.__)("Enter a YouTube channel or playlist URL to fetch and display videos.","youtube-channel-block"),children:(0,b.jsxs)("div",{className:"youtube-channel-block-placeholder-controls",children:[(0,b.jsx)(s.TextControl,{label:(0,n.__)("YouTube API Key","youtube-channel-block"),value:B,onChange:L,help:(0,n.__)("Get your API key from Google Cloud Console","youtube-channel-block"),placeholder:"AIzaSy..."}),(0,b.jsx)(s.TextControl,{label:(0,n.__)("Source URL","youtube-channel-block"),value:S,onChange:N,placeholder:"https://www.youtube.com/@channelname or https://www.youtube.com/playlist?list=...",help:(0,n.__)("Enter a YouTube channel URL or playlist URL","youtube-channel-block")}),(0,b.jsx)(s.RangeControl,{label:(0,n.__)("Number of videos","youtube-channel-block"),value:y,onChange:e=>l({maxResults:e}),min:1,max:50}),(0,b.jsx)(s.SelectControl,{label:(0,n.__)("Sort order","youtube-channel-block"),value:p,options:E,onChange:e=>l({order:e})}),(0,b.jsx)(s.Button,{variant:"primary",onClick:q,disabled:_||!B,children:_?(0,n.__)("Fetching...","youtube-channel-block"):(0,n.__)("Fetch Videos","youtube-channel-block")})]})})})},save:function({attributes:e}){const{lastUpdated:l,autoUpdate:o,updateFrequency:a,layout:n,columns:c,carouselVisible:r,carouselAutoplay:u,carouselInterval:s,align:i}=e,d=t.useBlockProps.save({className:["wp-block-youtube-channel-block",i?`align${i}`:"","grid"===n?"is-layout-grid":"","carousel"===n?"is-layout-carousel":""].filter(Boolean).join(" ")});if("carousel"===n){const e=t.useInnerBlocksProps.save({className:"youtube-channel-block-inner-blocks splide__list"});return(0,b.jsx)("div",{...d,children:(0,b.jsx)("div",{className:"splide","data-carousel-visible":r,"data-carousel-autoplay":u,"data-carousel-interval":s,children:(0,b.jsx)("div",{className:"splide__track",children:(0,b.jsx)("div",{...e})})})})}const h=t.useInnerBlocksProps.save({className:["youtube-channel-block-inner-blocks","grid"===n?`has-columns-${c}`:""].filter(Boolean).join(" ")});return(0,b.jsx)("div",{...d,children:(0,b.jsx)("div",{...h})})}})}},o={};function a(e){var n=o[e];if(void 0!==n)return n.exports;var t=o[e]={exports:{}};return l[e](t,t.exports,a),t.exports}a.m=l,e=[],a.O=(l,o,n,t)=>{if(!o){var c=1/0;for(i=0;i<e.length;i++){for(var[o,n,t]=e[i],r=!0,u=0;u<o.length;u++)(!1&t||c>=t)&&Object.keys(a.O).every(e=>a.O[e](o[u]))?o.splice(u--,1):(r=!1,t<c&&(c=t));if(r){e.splice(i--,1);var s=n();void 0!==s&&(l=s)}}return l}t=t||0;for(var i=e.length;i>0&&e[i-1][2]>t;i--)e[i]=e[i-1];e[i]=[o,n,t]},a.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return a.d(l,{a:l}),l},a.d=(e,l)=>{for(var o in l)a.o(l,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={827:0,947:0};a.O.j=l=>0===e[l];var l=(l,o)=>{var n,t,[c,r,u]=o,s=0;if(c.some(l=>0!==e[l])){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(u)var i=u(a)}for(l&&l(o);s<c.length;s++)t=c[s],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(i)},o=globalThis.webpackChunkyoutube_channel_block=globalThis.webpackChunkyoutube_channel_block||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))})();var n=a.O(void 0,[947],()=>a(14));n=a.O(n)})();