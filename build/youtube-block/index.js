(()=>{"use strict";var e,l={14:(e,l,o)=>{const a=window.wp.blocks,n=window.wp.i18n,t=window.wp.blockEditor,c=window.wp.apiFetch;var s=o.n(c);const r=window.wp.data,u=window.wp.components,i=window.wp.element,b=window.ReactJSXRuntime,d=JSON.parse('{"UU":"youtube-channel-block/youtube-channel-block"}');(0,a.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:l,clientId:o}){const{channelUrl:c,playlistUrl:d,apiKey:h,maxResults:y,order:p,isLoading:_,error:k,lastUpdated:v,autoUpdate:m,updateFrequency:g,layout:x,columns:C,carouselVisible:j,carouselAutoplay:w,carouselInterval:f,showTitles:U,titlePosition:S,mediaPlayerSidebarVideos:T,align:P}=e,[B,N]=(0,i.useState)(c||d),[L,R]=(0,i.useState)(h),I=e=>e?e.includes("playlist?list=")||e.includes("/playlist/")?{channelUrl:"",playlistUrl:e}:(e.includes("youtube.com/@")||e.includes("youtube.com/c/")||e.includes("youtube.com/channel/")||e.includes("youtube.com/user/"),{channelUrl:e,playlistUrl:""}):{channelUrl:"",playlistUrl:""},A=e=>{N(e),e&&L&&setTimeout(()=>{(async e=>{if(!L||!e)return;const{channelUrl:t,playlistUrl:c}=I(e);l({isLoading:!0,error:""});try{const e=await s()({path:"/youtube-channel-block/v1/fetch-videos",method:"POST",data:{channel_url:t,playlist_url:c,api_key:L,max_results:y,order:p}}),r=e.videos.map(e=>(0,a.createBlock)("core/embed",{url:e.video_url,providerNameSlug:"youtube",responsive:!0}));O(o,r),l({isLoading:!1,error:"",lastUpdated:(new Date).toISOString(),channelUrl:t,playlistUrl:c,apiKey:L}),F(""),e.cached&&(F((0,n.__)('Data loaded from cache. Use "Clear Cache" to force fresh data.',"youtube-channel-block")),setTimeout(()=>F(""),5e3))}catch(e){console.error("YouTube Block Error:",e),l({isLoading:!1,error:`Error: ${e.message}. Please check your API key and URLs, and ensure the plugin is properly activated.`})}})(e)},100)},{replaceInnerBlocks:O}=(0,r.useDispatch)("core/block-editor"),[V,D]=(0,i.useState)(B),[Y,F]=(0,i.useState)("");(0,i.useEffect)(()=>{if(V!==B&&B){O(o,[]);const{channelUrl:e,playlistUrl:a}=I(B);l({error:"",lastUpdated:"",channelUrl:e,playlistUrl:a}),F((0,n.__)('Source changed - videos cleared. Click "Refresh Videos" to fetch new content.',"youtube-channel-block")),setTimeout(()=>F(""),5e3)}D(B)},[B,o,O,l,V]);const E=(0,t.useBlockProps)({className:["wp-block-youtube-channel-block",P?`align${P}`:"","list"===x?"is-layout-list":"","grid"===x?"is-layout-grid":"","carousel"===x?"is-layout-carousel":"","media-player"===x?"is-layout-media-player":"",U?"has-titles":"",U?`title-position-${S}`:""].filter(Boolean).join(" "),"data-carousel-visible":"carousel"===x?String(j):void 0,"data-carousel-autoplay":"carousel"===x?String(w):void 0,"data-carousel-interval":"carousel"===x?String(f):void 0,"data-show-titles":String(U),"data-title-position":S}),$="carousel"===x?(0,t.useInnerBlocksProps)({className:"youtube-channel-block-inner-blocks splide__list"},{templateLock:!1,allowedBlocks:["core/embed","core/paragraph","core/heading"]}):(0,t.useInnerBlocksProps)({className:["youtube-channel-block-inner-blocks","grid"===x?`has-columns-${C}`:""].filter(Boolean).join(" ")},{templateLock:!1,allowedBlocks:["core/embed","core/paragraph","core/heading"]}),q=[{label:(0,n.__)("Date (newest first)","youtube-channel-block"),value:"date"},{label:(0,n.__)("Date (oldest first)","youtube-channel-block"),value:"dateAsc"},{label:(0,n.__)("Title (A-Z)","youtube-channel-block"),value:"title"},{label:(0,n.__)("Title (Z-A)","youtube-channel-block"),value:"titleDesc"},{label:(0,n.__)("Video count","youtube-channel-block"),value:"videoCount"},{label:(0,n.__)("View count","youtube-channel-block"),value:"viewCount"}],G=[{label:(0,n.__)("List (vertical)","youtube-channel-block"),value:"list"},{label:(0,n.__)("Grid","youtube-channel-block"),value:"grid"},{label:(0,n.__)("Carousel","youtube-channel-block"),value:"carousel"},{label:(0,n.__)("Media Player","youtube-channel-block"),value:"media-player"}],K=[{label:(0,n.__)("Hourly","youtube-channel-block"),value:"hourly"},{label:(0,n.__)("Daily","youtube-channel-block"),value:"daily"},{label:(0,n.__)("Weekly","youtube-channel-block"),value:"weekly"}],J=[{label:(0,n.__)("Above video","youtube-channel-block"),value:"above"},{label:(0,n.__)("Left of video","youtube-channel-block"),value:"left"},{label:(0,n.__)("Right of video","youtube-channel-block"),value:"right"}],M=async()=>{if(!L)return void l({error:(0,n.__)("YouTube API key is required.","youtube-channel-block")});if(!B)return void l({error:(0,n.__)("Please provide a YouTube channel or playlist URL.","youtube-channel-block")});const{channelUrl:e,playlistUrl:t}=I(B);l({isLoading:!0,error:""});try{const c=await s()({path:"/youtube-channel-block/v1/fetch-videos",method:"POST",data:{channel_url:e,playlist_url:t,api_key:L,max_results:y,order:p}}),r=c.videos.map(e=>(0,a.createBlock)("core/embed",{url:e.video_url,providerNameSlug:"youtube",responsive:!0}));O(o,r),l({isLoading:!1,error:"",lastUpdated:(new Date).toISOString(),channelUrl:e,playlistUrl:t,apiKey:L}),F(""),c.cached&&(F((0,n.__)('Data loaded from cache. Use "Clear Cache" to force fresh data.',"youtube-channel-block")),setTimeout(()=>F(""),5e3))}catch(e){console.error("YouTube Block Error:",e),l({isLoading:!1,error:`Error: ${e.message}. Please check your API key and URLs, and ensure the plugin is properly activated.`})}};return B?(0,b.jsxs)("div",{...E,children:[(0,b.jsxs)(t.InspectorControls,{children:[(0,b.jsxs)(u.PanelBody,{title:(0,n.__)("YouTube Settings","youtube-channel-block"),children:[(0,b.jsx)(u.TextControl,{label:(0,n.__)("YouTube API Key","youtube-channel-block"),value:L,onChange:R,help:(0,n.__)("Get your API key from Google Cloud Console","youtube-channel-block")}),(0,b.jsx)(u.TextControl,{label:(0,n.__)("Source URL","youtube-channel-block"),value:B,onChange:A,placeholder:"https://www.youtube.com/@channelname or https://www.youtube.com/playlist?list=...",help:(0,n.__)("Enter a YouTube channel URL or playlist URL","youtube-channel-block")}),(0,b.jsx)(u.RangeControl,{label:(0,n.__)("Number of videos","youtube-channel-block"),value:y,onChange:e=>l({maxResults:e}),min:1,max:50}),(0,b.jsx)(u.SelectControl,{label:(0,n.__)("Sort order","youtube-channel-block"),value:p,options:q,onChange:e=>l({order:e})})]}),(0,b.jsxs)(u.PanelBody,{title:(0,n.__)("Layout","youtube-channel-block"),initialOpen:!1,children:[(0,b.jsx)(u.SelectControl,{label:(0,n.__)("Layout Type","youtube-channel-block"),value:x,options:G,onChange:e=>l({layout:e})}),"grid"===x&&(0,b.jsx)(u.RangeControl,{label:(0,n.__)("Columns","youtube-channel-block"),value:C,onChange:e=>l({columns:e}),min:1,max:6}),"carousel"===x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.RangeControl,{label:(0,n.__)("Visible videos","youtube-channel-block"),value:j,onChange:e=>l({carouselVisible:e}),min:1,max:6}),(0,b.jsx)(u.ToggleControl,{label:(0,n.__)("Autoplay","youtube-channel-block"),checked:w,onChange:e=>l({carouselAutoplay:e})}),(0,b.jsx)(u.RangeControl,{label:(0,n.__)("Interval (seconds)","youtube-channel-block"),value:f,onChange:e=>l({carouselInterval:e}),min:1,max:12})]}),"list"===x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.ToggleControl,{label:(0,n.__)("Show video titles","youtube-channel-block"),checked:U,onChange:e=>l({showTitles:e})}),U&&(0,b.jsx)(u.SelectControl,{label:(0,n.__)("Title position","youtube-channel-block"),value:S,options:J,onChange:e=>l({titlePosition:e})})]}),"media-player"===x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.RangeControl,{label:(0,n.__)("Sidebar videos","youtube-channel-block"),value:T,onChange:e=>l({mediaPlayerSidebarVideos:e}),min:3,max:10,help:(0,n.__)("Number of videos to show in the sidebar","youtube-channel-block")}),(0,b.jsx)(u.ToggleControl,{label:(0,n.__)("Show video titles","youtube-channel-block"),checked:U,onChange:e=>l({showTitles:e})})]})]}),(0,b.jsxs)(u.PanelBody,{title:(0,n.__)("Auto Update","youtube-channel-block"),initialOpen:!1,children:[(0,b.jsx)(u.ToggleControl,{label:(0,n.__)("Auto-update videos","youtube-channel-block"),checked:m,onChange:e=>l({autoUpdate:e})}),m&&(0,b.jsx)(u.SelectControl,{label:(0,n.__)("Update frequency","youtube-channel-block"),value:g,options:K,onChange:e=>l({updateFrequency:e})})]})]}),(0,b.jsxs)("div",{className:"youtube-channel-block-container",children:[(0,b.jsxs)("div",{className:"youtube-channel-block-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:(0,n.__)("YouTube Videos","youtube-channel-block")}),(0,b.jsxs)("div",{className:"youtube-channel-block-meta",children:[v&&(0,b.jsxs)("span",{className:"last-updated",children:[(0,n.__)("Last updated:","youtube-channel-block")," ",new Date(v).toLocaleString()]}),Y&&Y.includes("cache")&&(0,b.jsx)("span",{className:"cache-status",children:(0,n.__)("ðŸ“¦ Cached","youtube-channel-block")}),m&&(0,b.jsxs)("span",{className:"auto-update-badge",children:[(0,n.__)("Auto-update:","youtube-channel-block")," ",g]})]})]}),(0,b.jsxs)("div",{className:"youtube-channel-block-actions",children:[(0,b.jsx)(u.Button,{variant:"primary",onClick:M,disabled:_||!L,children:_?(0,n.__)("Fetching...","youtube-channel-block"):(0,n.__)("Refresh Videos","youtube-channel-block")}),(0,b.jsx)(u.Button,{variant:"secondary",onClick:()=>{O(o,[]),l({error:"",lastUpdated:""}),F("")},children:(0,n.__)("Clear Videos","youtube-channel-block")}),(0,b.jsx)(u.Button,{variant:"tertiary",onClick:async()=>{try{await s()({path:"/youtube-channel-block/v1/clear-cache",method:"POST"}),l({error:""}),F((0,n.__)("Cache cleared successfully. Next fetch will get fresh data.","youtube-channel-block")),setTimeout(()=>F(""),3e3)}catch(e){l({error:`Cache clear failed: ${e.message}`})}},title:(0,n.__)("Clear cached data to force fresh API calls","youtube-channel-block"),children:(0,n.__)("Clear Cache","youtube-channel-block")})]})]}),k&&(0,b.jsx)(u.Notice,{status:"error",isDismissible:!1,children:k}),Y&&(0,b.jsx)(u.Notice,{status:"info",isDismissible:!1,children:Y}),_&&(0,b.jsxs)("div",{className:"youtube-channel-block-loading",children:[(0,b.jsx)(u.Spinner,{}),(0,b.jsx)("span",{children:(0,n.__)("Fetching videos...","youtube-channel-block")})]}),(0,b.jsx)("div",{...$})]})]}):(0,b.jsx)("div",{...E,children:(0,b.jsx)(u.Placeholder,{icon:"video-alt3",label:(0,n.__)("YouTube Videos Block","youtube-channel-block"),instructions:(0,n.__)("Enter a YouTube channel or playlist URL to fetch and display videos.","youtube-channel-block"),children:(0,b.jsxs)("div",{className:"youtube-channel-block-placeholder-controls",children:[(0,b.jsx)(u.TextControl,{label:(0,n.__)("YouTube API Key","youtube-channel-block"),value:L,onChange:R,help:(0,n.__)("Get your API key from Google Cloud Console","youtube-channel-block"),placeholder:"AIzaSy..."}),(0,b.jsx)(u.TextControl,{label:(0,n.__)("Source URL","youtube-channel-block"),value:B,onChange:A,placeholder:"https://www.youtube.com/@channelname or https://www.youtube.com/playlist?list=...",help:(0,n.__)("Enter a YouTube channel URL or playlist URL","youtube-channel-block")}),(0,b.jsx)(u.RangeControl,{label:(0,n.__)("Number of videos","youtube-channel-block"),value:y,onChange:e=>l({maxResults:e}),min:1,max:50}),(0,b.jsx)(u.SelectControl,{label:(0,n.__)("Sort order","youtube-channel-block"),value:p,options:q,onChange:e=>l({order:e})}),(0,b.jsx)(u.Button,{variant:"primary",onClick:M,disabled:_||!L,children:_?(0,n.__)("Fetching...","youtube-channel-block"):(0,n.__)("Fetch Videos","youtube-channel-block")})]})})})},save:function({attributes:e}){const{lastUpdated:l,autoUpdate:o,updateFrequency:a,layout:n,columns:c,carouselVisible:s,carouselAutoplay:r,carouselInterval:u,showTitles:i,titlePosition:d,mediaPlayerSidebarVideos:h,align:y}=e,p=t.useBlockProps.save({className:["wp-block-youtube-channel-block",y?`align${y}`:"","list"===n?"is-layout-list":"","grid"===n?"is-layout-grid":"","carousel"===n?"is-layout-carousel":"","media-player"===n?"is-layout-media-player":"",i?"has-titles":"",i?`title-position-${d}`:""].filter(Boolean).join(" "),"data-show-titles":String(i),"data-title-position":d,"data-media-player-sidebar-videos":"media-player"===n?String(h):void 0});if("carousel"===n){const e=t.useInnerBlocksProps.save({className:"youtube-channel-block-inner-blocks splide__list"});return(0,b.jsx)("div",{...p,children:(0,b.jsx)("div",{className:"splide","data-carousel-visible":s,"data-carousel-autoplay":r,"data-carousel-interval":u,children:(0,b.jsx)("div",{className:"splide__track",children:(0,b.jsx)("div",{...e})})})})}const _=t.useInnerBlocksProps.save({className:["youtube-channel-block-inner-blocks","grid"===n?`has-columns-${c}`:""].filter(Boolean).join(" ")});return(0,b.jsx)("div",{...p,children:(0,b.jsx)("div",{..._})})}})}},o={};function a(e){var n=o[e];if(void 0!==n)return n.exports;var t=o[e]={exports:{}};return l[e](t,t.exports,a),t.exports}a.m=l,e=[],a.O=(l,o,n,t)=>{if(!o){var c=1/0;for(i=0;i<e.length;i++){for(var[o,n,t]=e[i],s=!0,r=0;r<o.length;r++)(!1&t||c>=t)&&Object.keys(a.O).every(e=>a.O[e](o[r]))?o.splice(r--,1):(s=!1,t<c&&(c=t));if(s){e.splice(i--,1);var u=n();void 0!==u&&(l=u)}}return l}t=t||0;for(var i=e.length;i>0&&e[i-1][2]>t;i--)e[i]=e[i-1];e[i]=[o,n,t]},a.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return a.d(l,{a:l}),l},a.d=(e,l)=>{for(var o in l)a.o(l,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={827:0,947:0};a.O.j=l=>0===e[l];var l=(l,o)=>{var n,t,[c,s,r]=o,u=0;if(c.some(l=>0!==e[l])){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(r)var i=r(a)}for(l&&l(o);u<c.length;u++)t=c[u],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(i)},o=globalThis.webpackChunkyoutube_channel_block=globalThis.webpackChunkyoutube_channel_block||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))})();var n=a.O(void 0,[947],()=>a(14));n=a.O(n)})();